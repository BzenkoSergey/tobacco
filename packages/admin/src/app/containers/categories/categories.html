<div class="page-content">
	<h1 class="h4 mb-3">
		Categories
	</h1>

	<div class="container-fluid">
		<div class="row">
			<div class="col-6 pl-0">
				<div class="card">
					<div class="card-body">
						<button
							class="btn btn-primary mb-3"
							type="button"
							(click)="createPlaceholder()">
							<i class="fas fa-plus"></i>
							Create
						</button>

						<categories-items
							[items]="items"
							[level]="0"
							(selected)="setPlaceholder($event)">
						</categories-items>
					</div>
				</div>
			</div>

			<div class="col-6 pr-0 pl-0">
				<form
					*ngIf="placeholder"
					class="card"
					(submit)="save(placeholder)">
					<div class="card-body">
						<h4
							*ngIf="placeholder._id"
							class="card-title">
							Edit Category
						</h4>
						<h4
							*ngIf="!placeholder._id"
							class="card-title">
							Create Category
						</h4>

						<img
							*ngIf="placeholder.logo"
							class="img-fluid mb-2"
							[src]="placeholder.logo"
							alt="image">

						<div class="form-group">
							<label for="name">
								Name
							</label>
							<input
								type="text"
								class="form-control form-control-sm"
								id="name"
								name="name"
								placeholder="Enter Name"
								[(ngModel)]="placeholder.name">
						</div>

						<div class="form-group">
							<label for="code">
								Code
							</label>
							<input
								type="text"
								class="form-control form-control-sm"
								id="code"
								name="code"
								placeholder="Enter Code"
								[(ngModel)]="placeholder.code">
						</div>
						<div class="form-group">
							<label for="logo">
								Logo
							</label>
							<input
								type="text"
								class="form-control form-control-sm"
								id="logo"
								name="logo"
								placeholder="Enter Logo"
								[(ngModel)]="placeholder.logo">
						</div>
						<div class="form-group">
							<label for="order">
								Order
							</label>
							<input
								type="number"
								class="form-control form-control-sm"
								id="order"
								name="order"
								placeholder="Enter order"
								[(ngModel)]="placeholder.order">
						</div>
						<div class="form-group">
							<label for="parent">
								Parent
							</label>
							<select
								id="parent"
								class="form-control form-control-sm"
								name="parent"
								[(ngModel)]="placeholder.parent">

								<option
									*ngFor="let i of items"
									[value]="i._id">
									{{i.name}}
								</option>
							</select>
						</div>
						<div class="form-group">
							<button
								class="btn btn-primary mr-1"
								type="submit">
								<i class="fas fa-save"></i>
							</button>
							<button
								*ngIf="placeholder._id"
								class="btn btn-secondary mr-1"
								type="button"
								(click)="createChildPlaceholder(placeholder)">
								<i class="fas fa-code-branch"></i>
								Child
							</button>
							<button
								*ngIf="placeholder._id"
								class="btn btn-danger"
								type="button"
								(click)="remove(placeholder)">
								<i class="fas fa-trash-alt"></i>
							</button>
						</div>
					</div>
				</form>

				<div
					*ngIf="placeholder"
					class="card mt-3">
					<div class="card-body">
						<form (submit)="save(placeholder)">
							<mapping-keys
								name="mappingKeys"
								[(ngModel)]="placeholder.mappingKeys">
							</mapping-keys>

							<div class="form-group mt-2">
								<button
									class="btn btn-primary"
									type="submit">
									<i class="fas fa-save"></i>
								</button>
							</div>
						</form>
					</div>

					<div class="card-body">
						<custom-fields
							name="customFields"
							ownerType="category"
							[ownerCode]="placeholder.code">
						</custom-fields>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


